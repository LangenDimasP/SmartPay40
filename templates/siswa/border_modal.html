<div id="borderModal" class="hidden fixed inset-0 z-[99999] flex items-center justify-center p-4">
    <!-- Overlay, menutupi seluruh layar termasuk sidebar/navbar -->
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm z-[99998]"></div>
    <!-- Modal Content -->
    <div class="relative bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col z-[99999]">
        <div class="p-4 border-b flex justify-between items-center">
            <h2 class="text-xl font-bold text-purple-600">Pilih Border Profil</h2>
            <button class="text-gray-500 hover:text-gray-800 text-2xl" onclick="toggleBorders()">Ã—</button>
        </div>
        <div class="p-6 overflow-y-auto">
            <div class="bg-purple-50 border border-purple-200 text-purple-800 rounded-lg p-4 mb-6">
                <h3 class="font-bold mb-2">Cara Mendapatkan Border</h3>
                <ul class="space-y-1 text-sm list-none">
                    <li class="flex items-start gap-2"><i class="fas fa-info-circle text-purple-500 mt-1"></i> Selesaikan transaksi untuk membuka border baru</li>
                    <li class="flex items-start gap-2"><i class="fas fa-star text-purple-500 mt-1"></i> Semakin banyak transaksi, semakin keren bordernya</li>
                    <li class="flex items-start gap-2"><i class="fas fa-lock-open text-purple-500 mt-1"></i> Border terbuka secara otomatis saat mencapai target</li>
                </ul>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                {% for border in available_borders %}
                <div class="border rounded-lg p-4 text-center flex flex-col items-center transition hover:shadow-md hover:-translate-y-1">
                    <img src="{{ url_for('static', filename=border.image_path) }}" alt="{{ border.name }}" class="w-24 h-24 object-contain mb-3">
                    <div class="font-semibold text-gray-800 mb-2">{{ border.name }}</div>
                    {% if border.id in unlocked_border_ids or border.name == "Basic" %}
                        <div class="text-sm text-green-600 mb-2 flex items-center gap-1"><i class="fas fa-check-circle"></i> Terbuka</div>
                        <form action="{{ url_for('change_border', border_id=border.id) }}" method="POST">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            {% if current_user.active_border_id == border.id %}
                                <button type="submit" name="remove_border" value="1" class="text-xs bg-red-500 text-white py-1 px-3 rounded-full hover:bg-red-600 transition">Lepas Border</button>
                            {% else %}
                                <button type="submit" class="text-xs bg-purple-600 text-white py-1 px-3 rounded-full hover:bg-purple-700 transition flex items-center gap-1"><i class="fas fa-check"></i> Gunakan</button>
                            {% endif %}
                        </form>
                    {% else %}
                        <div class="text-sm text-red-500 mb-2 flex items-center gap-1"><i class="fas fa-lock"></i> Terkunci</div>
                        <div class="w-full bg-gray-200 rounded-full h-1.5 mb-1">
                            <div class="bg-purple-600 h-1.5 rounded-full" style="width: {{ (total_transactions / border.required_transactions * 100) if total_transactions < border.required_transactions else 100 }}%"></div>
                        </div>
                        <div class="text-xs text-gray-500">{{ total_transactions }}/{{ border.required_transactions }} transaksi</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>