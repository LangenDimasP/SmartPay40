{% extends 'admin_base.html' %}

{% block title %}Admin - Pengaturan Margin Penjual{% endblock %}

{% block admin_content %}
<div class="max-w-xl mx-auto bg-[#f9f5ff] p-6 rounded-xl shadow-lg mt-5">
    <h2 class="text-[#7c4dff] font-semibold text-2xl mb-4 relative pb-2 after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-12 after:h-0.5 after:bg-gradient-to-r after:from-[#7c4dff] after:to-[#5e35b1] after:rounded">
        Pengaturan Margin Penjual
    </h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <div class="my-4">
        {% for category, message in messages %}
        <p class="p-3 rounded {{ 'bg-green-50 border-l-4 border-green-600 text-green-600' if category == 'success' else 'bg-red-50 border-l-4 border-red-600 text-red-600' }}">
            {{ message }}
        </p>
        {% endfor %}
    </div>
    <hr class="my-5 border-0 h-px bg-gradient-to-r from-[rgba(124,77,255,0.1)] via-[rgba(124,77,255,0.3)] to-[rgba(124,77,255,0.1)]" />
    {% endif %}
    {% endwith %}

    <form method="POST" class="bg-white p-5 rounded-lg shadow-md border border-[rgba(124,77,255,0.1)]">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="mb-5">
            <label for="nominal_per_margin" class="block text-sm font-medium text-[#5e35b1] mb-2">Nominal Per Margin (misal: 5000)</label>
            <input
                type="number"
                id="nominal_per_margin"
                name="nominal_per_margin"
                min="1"
                required
                value="{{ margin.nominal_per_margin }}"
                class="w-full p-3 border border-[rgba(124,77,255,0.3)] rounded-lg text-[#333333] bg-white focus:ring-2 focus:ring-[#7c4dff] focus:border-[#7c4dff]"
            />
        </div>
        <div class="mb-5">
            <label for="potongan_per_margin" class="block text-sm font-medium text-[#5e35b1] mb-2">Potongan Per Margin (misal: 500)</label>
            <input
                type="number"
                id="potongan_per_margin"
                name="potongan_per_margin"
                min="0"
                required
                value="{{ margin.potongan_per_margin }}"
                class="w-full p-3 border border-[rgba(124,77,255,0.3)] rounded-lg text-[#333333] bg-white focus:ring-2 focus:ring-[#7c4dff] focus:border-[#7c4dff]"
            />
        </div>
        <button type="submit"
            class="w-full p-3 bg-gradient-to-r from-[#7c4dff] to-[#5e35b1] text-white rounded-lg font-semibold hover:from-[#5e35b1] hover:to-[#7c4dff] hover:-translate-y-0.5 hover:shadow-lg transition-all duration-300 shadow-md">
            Simpan Pengaturan
        </button>
    </form>
    <hr class="my-5 border-0 h-px bg-gradient-to-r from-[rgba(124,77,255,0.1)] via-[rgba(124,77,255,0.3)] to-[rgba(124,77,255,0.1)]" />
    <p>
        <a href="{{ url_for('admin_dashboard_content') }}"
           class="inline-flex items-center gap-2 text-[#7c4dff] font-medium text-sm py-2 px-3 rounded hover:bg-[#f9f5ff] hover:text-[#5e35b1] hover:-translate-x-1 transition-all duration-300">
            <i class="fas fa-arrow-left"></i> Kembali ke Dashboard Admin
        </a>
    </p>
</div>
{% endblock admin_content %}